(function(p,o,e){"use strict";var a=p(o),n=p(e),l=null;p(function(){var o=p("body");0===o.length&&p.error("Do not use popple until the DOM has loaded."),l=p("<div></div>").hide().appendTo(o).click(function(o){o.preventDefault();for(var e=p.popple.modals.length-1;e>=0;e--){var a=p.popple.modals[e],n=a.popple("options");n.bgClose&&a.popple("hide")}});var e=function(){var p="popple-bounce-push-animation",o="popple-bounce-pop-animation",e="popple-sleep-animation",a="-webkit-animation-name",n="popple-wake-animation",l="animation-fill-mode",t="-moz-animation-name",i="-webkit-transform",s="-webkit-keyframes",r="-o-animation-name",d="-moz-keyframes",m="-moz-transform",u="animation-name",f="popple-bounce",c="popple-bg-out",h="popple-bg-in",g="-o-keyframes",x="-o-transform",v="translateY",A="keyframes",b="transform",k="popple-bg",w="position",C="forwards",y="opacity",z="-300px";return["@",A," ",p,"{0%{",b,":",v,"(",z,");",y,":0}60%{",b,":",v,"(20px)}100%{",b,":",v,"(0);",y,":1}}@",s," ",p,"{0%{",i,":",v,"(",z,");",y,":0}60%{",i,":",v,"(20px)}100%{",i,":",v,"(0);",y,":1}}@",d," ",p,"{0%{",m,":",v,"(",z,");",y,":0}60%{",m,":",v,"(20px)}100%{",m,":",v,"(0);",y,":1}}@",g," ",p,"{0%{",x,":",v,"(",z,");",y,":0}60%{",x,":",v,"(20px)}100%{",x,":",v,"(0);",y,":1}}.",f,".push{",u,":",p,";",a,":",p,";",t,":",p,";",r,":",p,"}@",A," ",o,"{0%{",b,":",v,"(0);",y,":1}40%{",b,":",v,"(20px)}100%{",b,":",v,"(",z,");",y,":0}}@",s," ",o,"{0%{",i,":",v,"(0);",y,":1}40%{",i,":",v,"(20px)}100%{",i,":",v,"(",z,");",y,":0}}@",d," ",o,"{0%{",m,":",v,"(0);",y,":1}40%{",m,":",v,"(20px)}100%{",m,":",v,"(",z,");",y,":0}}@",g," ",o,"{0%{",x,":",v,"(0);",y,":1}40%{",x,":",v,"(20px)}100%{",x,":",v,"(",z,");",y,":0}}.",f,".pop{",u,":",o,";",a,":",o,";",t,":",o,";",r,":",o,"}@",A," ",n,"{0%{",b,":",v,"(100px);",y,":0}100%{",b,":",v,"(0);",y,":1}}@",s," ",n,"{0%{",i,":",v,"(100px);",y,":0}100%{",i,":",v,"(0);",y,":1}}@",d," ",n,"{0%{",m,":",v,"(100px);",y,":0}100%{",m,":",v,"(0);",y,":1}}@",g," ",n,"{0%{",x,":",v,"(100px);",y,":0}100%{",x,":",v,"(0);",y,":1}}.popple-modal.wake{",u,":",n,";",a,":",n,";",t,":",n,";",r,":",n,"}@",A," ",e,"{0%{",b,":",v,"(0);",y,":1}100%{",b,":",v,"(100px);",y,":0}}@",s," ",e,"{0%{",i,":",v,"(0);",y,":1}100%{",i,":",v,"(100px);",y,":0}}@",d," ",e,"{0%{",m,":",v,"(0);",y,":1}100%{",m,":",v,"(100px);",y,":0}}@",g," ",e,"{0%{",x,":",v,"(0);",y,":1}100%{",x,":",v,"(100px);",y,":0}}.popple-modal.sleep{",u,":",e,";",a,":",e,";",t,":",e,";",r,":",e,"}@",A," ",h,"{0%{",y,":0}100%{",y,":1}}@",s," ",h,"{0%{",y,":0}100%{",y,":1}}@",d," ",h,"{0%{",y,":0}100%{",y,":1}}@",g," ",h,"{0%{",y,":0}100%{",y,":1}}.",k,".in{",u,":",h,";",a,":",h,";",t,":",h,";",r,":",h,"}@",A," ",c,"{0%{",y,":1}100%{",y,":0}}@",s," ",c,"{0%{",y,":1}100%{",y,":0}}@",d," ",c,"{0%{",y,":1}100%{",y,":0}}@",g," ",c,"{0%{",y,":1}100%{",y,":0}}.",k,".out{",u,":",c,";",a,":",c,";",t,":",c,";",r,":",c,"}.",k,"-diagonal{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAIUlEQVQIW2NkQAL///83ZoTxwRxGxrNgARgHxGZE5oAEAOz3DzVasxQ9AAAAAElFTkSuQmCC)}.",k,"{background-color:rgba(0,0,0,.92);width:100%;height:100%;",w,":fixed;top:0;left:0;z-index:1000;",l,":",C,";-webkit-",l,":",C,";-moz-",l,":",C,";-o-",l,":",C,"}.popple-modal{background-color:#fff;",w,":relative;top:100px;border-radius:3px;padding:20px;",w,":fixed;z-index:1001;display:none;box-shadow:0 0 15px rgba(0,0,0,.3);overflow:hidden;",l,":",C,";-webkit-",l,":",C,";-moz-",l,":",C,";-o-",l,":",C,"}.popple-close-x{",w,':absolute;top:7px;right:14px;color:#000;font-size:19px;line-height:19px;cursor:pointer;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;',y,":.18;text-shadow:0 1px 0 #fff;font-weight:bold}.popple-close-x:hover{",y,":.12}"].join("")}();7===e.length?p("head").append('<link href="popple.css" rel="stylesheet" type="text/css" />'):p("head").append(['<style type="text/css">',e,"</style>"].join(""))}),p.popple={defaults:{bg:"popple-bg popple-bg-diagonal",push:!0,duration:400,animation:"popple-bounce",closer:!0,bgClose:!0,escClose:!0},modals:[],active:function(){return p.popple.modals.length?p.popple.modals[p.popple.modals.length-1]:null},push:function(o,e){var a=null;return o.each(function(){var o=p(this),n=o.data("modal");if(n||o.data("modal",n=new i(o,e)),"push"===e)n.push();else if("pop"===e)n.pop();else{if("options"===e)return a=n.options,void 0;n.options.push&&n.push()}}),a||o},pop:function(){0!==p.popple.modals.length&&p.popple.modals[p.popple.modals.length-1].data("modal").pop()},popAll:function(){for(var o=p.popple.modals.length-1;o>=0;o--)p.popple.modals[o].data("modal").pop()}};var t=a.width();(function(){var o=null;a.on("resize",function(){o||(o=setTimeout(function(){o=!1,t=a.width();for(var e=0;p.popple.modals.length>e;e++){var n=p.popple.modals[e];n.data("modal").center()}},50))})})();var i=function(o,e){var a=p(o),n=this;n.options=p.extend({},p.popple.defaults,"object"==typeof e&&e),a.addClass("popple-modal").on("click",".popple-close",function(){n.pop()}).on("click",".popple-close-all",p.popple.popAll),n.options.closer&&a.append("<div class='popple-close popple-close-x'>x</div>"),n.center=function(){a.css("left",Math.floor((t-a.width())/2)+"px")},n.push=function(){a.trigger("push"),p.popple.modals.push(a),n.center(),l.removeClass().addClass(n.options.bg);var o=n.options.animation?n.options.duration:0;if(a.add(l).css({"animation-duration":o+"ms","-webkit-animation-duration":o+"ms","-moz-animation-duration":o+"ms","-o-animation-duration":o+"ms","-MS-animation-duration":o+"ms"}),"string"==typeof n.lastAnimation&&n.lastAnimation.length>0&&(a.removeClass(n.lastAnimation),delete n.lastAnimation),"string"==typeof n.options.animation&&n.options.animation.length>0&&a.addClass(n.options.animation),l.show().removeClass("out").addClass("in"),a.removeClass("push pop wake sleep").show().addClass("push"),o?setTimeout(function(){a.trigger("pushed")},o):a.trigger("pushed"),p.popple.modals.length>1){var e=p.popple.modals[p.popple.modals.length-2];e.removeClass("push pop wake sleep").addClass("sleep")}},n.pop=function(){var o=p.inArray(a,p.popple.modals);if(-1!==o){a.trigger("pop"),p.popple.modals.splice(o,1),a.removeClass("push pop wake sleep").addClass("pop");var e=n.options.animation?n.options.duration:0;if(p.popple.modals.length>0){var t=p.popple.modals[p.popple.modals.length-1];t.removeClass("push pop wake sleep").addClass("wake")}else l.removeClass("in out").addClass("out"),setTimeout(function(){l.hide()},e);setTimeout(function(){a.hide().trigger("popped")},e)}}},s=p.fn.popple;p.fn.popple=function(o){return p.popple.push(this,o)},p.fn.popple.noConflict=function(){return p.fn.popple=s,p.fn.popple},n.keyup(function(o){if(27===o.keyCode){var e=p.popple.active();e&&e.popple("options").escClose&&e.popple("pop")}}),n.on("click","[popple]",function(o){o.preventDefault();var e=p(this),a=p.trim(e.attr("popple")),n=p(a);n.popple(),n.one("pop",function(){e.focus()})})})(jQuery,window,document);