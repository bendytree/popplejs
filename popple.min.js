var b=jQuery,g=b(window),h=b(document),j=null;b(function(){var a=b("body");0===a.length&&b.error("Do not use popple until the DOM has loaded.");j=b("<div></div>").k().t(a).click(function(a){a.preventDefault();for(a=b.a.b.length-1;0<=a;a--){var c=b.a.b[a];c.a("options").n&&c.a("hide")}});b("head").append('<style type="text/css"></style>')});
b.a={q:{m:"popple-bg popple-bg-diagonal",push:!0,duration:400,e:"popple-bounce",o:!0,n:!0,r:!0},b:[],l:function(){return b.a.b.length?b.a.b[b.a.b.length-1]:null},push:function(a,e){var c=null;a.v(function(){var a=b(this),f=a.data("modal");f||a.data("modal",f=new k(a,e));"push"===e?f.push():"pop"===e?f.pop():"options"===e?c=f.options:f.options.push&&f.push()});return c||a},pop:function(){0!==b.a.b.length&&b.a.b[b.a.b.length-1].data("modal").pop()},s:function(){for(var a=b.a.b.length-1;0<=a;a--)b.a.b[a].data("modal").pop()}};
var l=g.width(),m=null;g.i("resize",function(){m||(m=setTimeout(function(){m=!1;l=g.width();for(var a=0;a<b.a.b.length;a++)b.a.b[a].data("modal").j()},50))});
function k(a,e){var c=b(a),d=this;d.options=b.extend({},b.a.q,"object"===typeof e&&e);c.c("popple-modal").i("click",".popple-close",function(){d.pop()}).i("click",".popple-close-all",b.a.s);d.options.o&&c.append("<div class='popple-close popple-close-x'>x</div>");d.j=function(){c.p("left",Math.floor((l-c.width())/2)+"px")};d.push=function(){c.g("push");b.a.b.push(c);d.j();j.d().c(d.options.m);var a=d.options.e?d.options.duration:0;c.add(j).p({"animation-duration":a+"ms","-webkit-animation-duration":a+
"ms","-moz-animation-duration":a+"ms","-o-animation-duration":a+"ms","-MS-animation-duration":a+"ms"});"string"===typeof d.h&&0<d.h.length&&(c.d(d.h),delete d.h);"string"===typeof d.options.e&&0<d.options.e.length&&c.c(d.options.e);j.show().d("out").c("in");c.d("push pop wake sleep").show().c("push");a?setTimeout(function(){c.g("pushed")},a):c.g("pushed");1<b.a.b.length&&b.a.b[b.a.b.length-2].d("push pop wake sleep").c("sleep")};d.pop=function(){var a=b.w(c,b.a.b);-1!==a&&(c.g("pop"),b.a.b.splice(a,
1),c.d("push pop wake sleep").c("pop"),a=d.options.e?d.options.duration:0,0<b.a.b.length?b.a.b[b.a.b.length-1].d("push pop wake sleep").c("wake"):(j.d("in out").c("out"),setTimeout(function(){j.k()},a)),setTimeout(function(){c.k().g("popped")},a))}}var n=b.f.a;b.f.a=function(a){return b.a.push(this,a)};b.f.a.A=function(){b.f.a=n;return b.f.a};h.z(function(a){27===a.keyCode&&(a=b.a.l())&&a.a("options").r&&a.a("pop")});
h.i("click","[popple]",function(a){a.preventDefault();var e=b(this);a=b.trim(e.u("popple"));a=b(a);a.a();a.B("pop",function(){e.focus()})});
